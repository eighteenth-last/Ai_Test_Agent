import{t as m}from"./index-DiZwQw_Q.js";import{_ as w,u as b,c as q,d as l,w as s,e as t,N as B,f as k,a4 as F,a5 as g,D as v,S as G,B as x,i as p,b as n,a6 as I,a7 as U,r as d}from"./index-9-2YgmGC.js";const V={class:"test-case-view"},A={__name:"CaseGenerate",setup(D){const r=b(),u=d({requirement:""}),i=d(!1),c=d(!1),o=d(null),f=d(null),y=({file:e})=>{o.value=e.file},_=async()=>{if(!o.value){r.warning("请先选择文件");return}c.value=!0;try{const e=await m.uploadFile(o.value);e.success?(r.success(e.message),o.value=null,f.value&&f.value.clear()):r.error(e.message)}catch(e){r.error("上传文件失败"),console.error(e)}finally{c.value=!1}},N=async()=>{if(!u.value.requirement.trim()){r.warning("请输入测试需求");return}i.value=!0;try{const e=await m.generate(u.value.requirement);e.success?(r.success(e.message),u.value.requirement=""):r.error(e.message)}catch(e){r.error("生成测试用例失败"),console.error(e)}finally{i.value=!1}};return(e,a)=>(k(),q("div",V,[l(t(B),{title:"测试用例生成"},{default:s(()=>[l(t(F),{cols:2,"x-gap":24},{default:s(()=>[l(t(g),null,{default:s(()=>[l(t(v),{label:"测试需求"},{default:s(()=>[l(t(G),{value:u.value.requirement,"onUpdate:value":a[0]||(a[0]=C=>u.value.requirement=C),type:"textarea",rows:10,placeholder:"请输入测试需求，例如：用户可以登录学生端，查看课程，打开实验项目，上传并提交文件",style:{height:"184px"},"input-props":{style:"height: 184px; resize: none;"}},null,8,["value"])]),_:1}),l(t(x),{type:"primary",onClick:N,loading:i.value},{icon:s(()=>[...a[1]||(a[1]=[n("i",{class:"fas fa-magic"},null,-1)])]),default:s(()=>[a[2]||(a[2]=p(" 生成测试用例 ",-1))]),_:1},8,["loading"])]),_:1}),l(t(g),null,{default:s(()=>[l(t(v),{label:"或上传文件"},{default:s(()=>[l(t(I),{ref_key:"uploadRef",ref:f,"default-upload":!1,onChange:y,max:1,accept:".md,.txt,.pdf,.doc,.docx","directory-dnd":""},{default:s(()=>[l(t(U),null,{default:s(()=>[...a[3]||(a[3]=[n("div",{class:"upload-content"},[n("i",{class:"fas fa-cloud-upload-alt text-4xl text-gray-400 mb-2"}),n("p",{class:"text-gray-600"},[p("拖拽文件到此处或 "),n("em",{class:"text-primary"},"点击上传")]),n("p",{class:"text-xs text-gray-400 mt-2"},"支持 .md / .txt / .pdf / .doc / .docx 格式，文件大小不超过 10MB")],-1)])]),_:1})]),_:1},512)]),_:1}),l(t(x),{type:"success",onClick:_,loading:c.value,disabled:!o.value},{icon:s(()=>[...a[4]||(a[4]=[n("i",{class:"fas fa-file-upload"},null,-1)])]),default:s(()=>[a[5]||(a[5]=p(" 上传文件并生成 ",-1))]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]))}},T=w(A,[["__scopeId","data-v-fb7c3957"]]);export{T as default};
